---
layout: news_post
title: "CVE-2018-6914: Tạo tệp và thư mục ngoài ý muốn với duyệt thư mục trong tempfile và tmpdir"
author: "usa"
translator:
date: 2018-03-28 14:00:00 +0000
tags: security
lang: vi
---

Có một lỗ hổng tạo thư mục ngoài ý muốn trong thư viện tmpdir đi kèm với Ruby.
Và cũng có lỗ hổng tạo tệp ngoài ý muốn trong thư viện tempfile đi kèm với Ruby, vì nó sử dụng tmpdir nội bộ.
Lỗ hổng này đã được gán mã định danh CVE [CVE-2018-6914](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-6914).

## Chi tiết

Phương thức `Dir.mktmpdir` được giới thiệu bởi thư viện tmpdir nhận tiền tố và hậu tố của thư mục được tạo làm tham số đầu tiên.
Tiền tố có thể chứa các chỉ định thư mục tương đối `"../"`, vì vậy phương thức này có thể được sử dụng để nhắm đến bất kỳ thư mục nào.
Vì vậy, nếu một script nhận đầu vào bên ngoài làm tiền tố, và thư mục đích có quyền không phù hợp hoặc tiến trình Ruby có đặc quyền không phù hợp, kẻ tấn công có thể tạo thư mục hoặc tệp tại bất kỳ thư mục nào.

Tất cả người dùng đang chạy phiên bản bị ảnh hưởng nên nâng cấp ngay lập tức.

## Các phiên bản bị ảnh hưởng

* Ruby dòng 2.2: 2.2.9 trở về trước
* Ruby dòng 2.3: 2.3.6 trở về trước
* Ruby dòng 2.4: 2.4.3 trở về trước
* Ruby dòng 2.5: 2.5.0 trở về trước
* Ruby dòng 2.6: 2.6.0-preview1
* trước trunk revision r62990

## Ghi công

Cảm ơn [ooooooo_q](https://hackerone.com/ooooooo_q) đã báo cáo vấn đề này.

## Lịch sử

* Công bố lần đầu vào 2018-03-28 14:00:00 (UTC)
