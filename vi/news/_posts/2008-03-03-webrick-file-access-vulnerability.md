---
layout: news_post
title: "Lỗ hổng truy cập tệp trong WEBrick"
author: "Shugo Maeda"
lang: vi
---

WEBrick, một thư viện tiêu chuẩn của Ruby để triển khai máy chủ HTTP,
có lỗ hổng truy cập tệp.

## Tác động

Các chương trình sau đây bị ảnh hưởng.

1.  Các chương trình xuất bản tệp sử dụng `WEBrick::HTTPServer.new` với
    tùy chọn `:DocumentRoot`
2.  Các chương trình xuất bản tệp sử dụng
    `WEBrick::HTTPServlet::FileHandler`

Các hệ thống bị ảnh hưởng là:

1.  Các hệ thống chấp nhận dấu gạch chéo ngược (\\) làm ký tự phân
    tách đường dẫn, chẳng hạn như Windows.
2.  Các hệ thống sử dụng hệ thống tệp không phân biệt chữ hoa chữ
    thường như NTFS trên Windows, HFS trên Mac OS X.

Lỗ hổng này có các tác động sau.

1.  Kẻ tấn công có thể truy cập các tệp riêng tư bằng cách gửi một URL
    có dấu gạch chéo ngược (\\) được mã hóa URL. Khai thác này chỉ hoạt
    động trên các hệ thống chấp nhận dấu gạch chéo ngược làm ký tự phân
    tách đường dẫn.

    Ví dụ:

        http://[server]:[port]/..%5c..%5c..%5c..%5c..%5c..%5c..%5c..%5c..%5c..%5c/boot.ini

2.  Kẻ tấn công có thể truy cập các tệp khớp với các mẫu được chỉ định
    bởi tùy chọn `:NondisclosureName` (giá trị mặc định là `[".ht*",
    "*~"]`). Khai thác này chỉ hoạt động trên các hệ thống sử dụng hệ
    thống tệp không phân biệt chữ hoa chữ thường.

## Các phiên bản bị ảnh hưởng

1.8 series
: * 1\.8.4 và tất cả các phiên bản trước đó
  * 1\.8.5-p114 và tất cả các phiên bản trước đó
  * 1\.8.6-p113 và tất cả các phiên bản trước đó

1.9 series
: * 1\.9.0-1 và tất cả các phiên bản trước đó

## Giải pháp

1.8 series
: Vui lòng nâng cấp lên 1.8.5-p115 hoặc 1.8.6-p114.

  * [&lt;URL:https://cache.ruby-lang.org/pub/ruby/1.8/ruby-1.8.5-p115.tar.gz&gt;][1]
    (md5sum: 20ca6cc87eb077296806412feaac0356)
  * [&lt;URL:https://cache.ruby-lang.org/pub/ruby/1.8/ruby-1.8.6-p114.tar.gz&gt;][2]
    (md5sum: 500a9f11613d6c8ab6dcf12bec1b3ed3)

1.9 series
: Vui lòng áp dụng bản vá sau cho
  lib/webrick/httpservlet/filehandler.rb.

  * [&lt;URL:https://cache.ruby-lang.org/pub/ruby/1.9/ruby-1.9.0-1-webrick-vulnerability-fix.diff&gt;][3]
    (md5sum: b7b58aed40fa1609a67f53cfd3a13257)

Xin lưu ý rằng gói sửa lỗi này có thể đã có sẵn qua phần mềm quản lý
gói của bạn.

## Ghi nhận

Ghi nhận Digital Security Research Group
([&lt;URL:http://dsec.ru/&gt;][4]) đã tiết lộ vấn đề cho Đội An ninh
Ruby.



[1]: https://cache.ruby-lang.org/pub/ruby/1.8/ruby-1.8.5-p115.tar.gz
[2]: https://cache.ruby-lang.org/pub/ruby/1.8/ruby-1.8.6-p114.tar.gz
[3]: https://cache.ruby-lang.org/pub/ruby/1.9/ruby-1.9.0-1-webrick-vulnerability-fix.diff
[4]: http://dsec.ru/
