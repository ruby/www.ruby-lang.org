{% assign home = site.data.locales.home[page.lang] %}

<!-- Community Section -->
<section class="community-section bg-gold-300 dark:bg-stone-800 py-16 md:py-20 lg:py-24">
  <div class="container mx-auto px-6 lg:px-8">
    <!-- Section Header -->
    <div class="text-center mb-8 md:mb-12">
      <h2 class="text-4xl md:text-5xl font-extrabold mb-6">
        <a href="{{ home.community.link_about_url }}" class="text-stone-900 dark:text-white hover:text-ruby-600 dark:hover:text-ruby-400 transition-colors inline-flex items-center">
          {{ home.community.title }}<svg class="inline-block ml-2 w-6 h-6 md:w-8 md:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
        </a>
      </h2>
      <div class="max-w-4xl mx-auto">
        <p class="text-base md:text-lg text-stone-800 dark:text-stone-200">
          {{ home.community.description_1 }}<br>
          {{ home.community.description_2 }}
        </p>
      </div>
    </div>

    <!-- Motto -->
    <div class="text-center mb-12 md:mb-16">
      <p class="text-lg md:text-xl text-ruby-600 dark:text-ruby-400">
        {{ home.community.motto_prefix }} "<span class="font-bold">{{ home.community.motto_minaswan }}</span>" {{ home.community.motto_separator }} <span class="italic">{{ home.community.motto_translation }}</span>
      </p>
    </div>
  </div>

  <!-- SVG Mask Definition -->
  <svg width="0" height="0" style="position: absolute;">
    <defs>
      <clipPath id="ruby-gem-mask" clipPathUnits="objectBoundingBox" transform="scale(0.005, 0.00556)">
        <path d="M45.79,4.27c1.56-2.34,4.3-3.91,7.42-3.91h93.77c3.13,0,5.86,1.56,7.42,3.91l43.76,59.39c2.73,3.52,2.34,8.6-.39,11.72l-90.64,100.02c-1.95,1.95-4.3,3.13-7.03,3.13s-5.08-1.17-7.03-3.13L2.42,75.38c-3.13-3.13-3.13-8.2-.39-11.72L45.79,4.27Z"/>
      </clipPath>
    </defs>
  </svg>

  <!-- Photo Gallery (Full Width) -->
  <div class="relative overflow-hidden mb-12 md:mb-16 pt-2 h-[170px] 2xl:h-[200px]">
    <div class="flex gap-6 2xl:gap-8 absolute w-max will-change-transform animate-scroll-left">
      {% assign community_photos = site.static_files | where_exp: "file", "file.path contains '/images/home/community/pics/'" | where_exp: "file", "file.extname == '.jpg' or file.extname == '.png' or file.extname == '.jpeg' or file.extname == '.JPG' or file.extname == '.PNG' or file.extname == '.JPEG'" %}
      {% for i in (1..2) %}
        <div class="flex gap-6 2xl:gap-8 flex-shrink-0">
          {% for photo in community_photos %}
          <div class="flex-shrink-0 transition-transform duration-300 hover:scale-105 w-[160px] h-[144px] 2xl:w-[200px] 2xl:h-[180px]">
            <img src="{{ photo.path }}" alt="Ruby Community" class="w-full h-full object-cover" style="clip-path: url(#ruby-gem-mask);">
          </div>
          {% endfor %}
        </div>
      {% endfor %}
    </div>
  </div>

  <div class="container mx-auto px-6 lg:px-8">
    <!-- Links -->
    <div class="flex justify-center">
      <ul class="list-disc space-y-2 text-sm sm:text-base marker:text-stone-400 dark:marker:text-stone-500">
        {% for link in home.community.links %}
        <li>
          <a href="{{ link.url }}" {% if link.external %}target="_blank" rel="noopener noreferrer"{% endif %} class="text-stone-900 dark:text-stone-200 hover:text-ruby-600 dark:hover:text-ruby-400 transition-colors{% if link.external %} inline-flex items-center gap-1{% endif %}">
            {{ link.text }}{% if link.external %} <svg class="w-3 h-3 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>{% endif %}
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>
</section>
