{% assign home = site.data.locales.home[page.lang] %}

<!-- Try Ruby Section -->
<section class="try-ruby-section pb-0 relative">
  <div class="container mx-auto px-6 lg:px-8">
    <!-- Code Examples Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12 2xl:gap-16 mb-16">
      {% for i in (1..3) %}
      <div class="group bg-white dark:bg-stone-900 rounded-2xl overflow-hidden flex flex-col shadow-sm border border-gold-400 dark:border-gold-500 has-[a:hover]:border-gold-500 dark:has-[a:hover]:border-gold-400 transition-colors box-border">
        <!-- Code Area -->
        <div class="code-example-wrapper relative flex-grow min-h-[200px]">
          <!-- Preloader -->
          <div id="try-ruby-loader-{{ i }}" class="absolute inset-0 flex items-center justify-center bg-white dark:bg-stone-900 z-10">
            <div class="flex flex-col items-center gap-3">
              <div class="w-8 h-8 border-[3px] border-gold-300 border-t-gold-500 rounded-full animate-spin"></div>
            </div>
          </div>
          <!-- Code Content -->
          <div id="try-ruby-example-{{ i }}" class="code-example p-8 pb-6 font-mono text-sm overflow-x-auto h-full group-has-[a:hover]:bg-gold-50 dark:group-has-[a:hover]:bg-stone-800 opacity-0 transition-all duration-300">
            <!-- Code will be loaded dynamically -->
          </div>
        </div>

        <!-- Bottom Section with Wave Border -->
        <div id="try-ruby-bottom-{{ i }}" class="relative opacity-0 transition-all duration-300 before:content-[''] before:absolute before:w-[58px] before:h-[58px] before:bg-[url('/images/home/try_ruby/arrow.svg')] dark:before:bg-[url('/images/home/try_ruby/arrow-dark.svg')] before:bg-no-repeat before:bg-contain before:-top-[7px] before:left-[calc(50%+90px)] before:-translate-x-1/2 before:rotate-[40deg] before:z-20">
          <!-- Wave Border SVG -->
          <div class="absolute -top-3 left-0 right-0 h-4 text-gold-400 dark:text-gold-500 group-has-[a:hover]:text-gold-500 dark:group-has-[a:hover]:text-gold-600 transition-colors overflow-hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 20" preserveAspectRatio="none" class="w-[200%] h-full group-has-[a:hover]:animate-wave-scroll">
              <path d="M0,10 C10,0 20,20 30,10 C40,0 50,20 60,10 C70,0 80,20 90,10 C100,0 110,20 120,10 C130,0 140,20 150,10 C160,0 170,20 180,10 C190,0 200,20 210,10 C220,0 230,20 240,10 C250,0 260,20 270,10 C280,0 290,20 300,10 C310,0 320,20 330,10 C340,0 350,20 360,10 C370,0 380,20 390,10 C400,0 410,20 420,10 C430,0 440,20 450,10 C460,0 470,20 480,10 C490,0 500,20 510,10 C520,0 530,20 540,10 C550,0 560,20 570,10 C580,0 590,20 600,10 C610,0 620,20 630,10 C640,0 650,20 660,10 C670,0 680,20 690,10 C700,0 710,20 720,10 C730,0 740,20 750,10 C760,0 770,20 780,10 C790,0 800,20 800,10 L800,20 L0,20 Z" fill="currentColor"/>
            </svg>
          </div>

          <!-- Button Area -->
          <div class="bg-gold-400 dark:bg-gold-500 group-has-[a:hover]:bg-gold-500 dark:group-has-[a:hover]:bg-gold-600 pt-4 pb-5 px-6 flex flex-col items-center transition-colors border-t border-gold-400 dark:border-gold-500 group-has-[a:hover]:border-gold-500 dark:group-has-[a:hover]:border-gold-600">
            <!-- TRY Button -->
            <a id="try-ruby-button-{{ i }}"
               href="{{ home.try_ruby.button_url }}"
               target="_blank"
               rel="noopener noreferrer"
               class="inline-flex items-center justify-center gap-2 bg-white text-stone-800 hover:bg-ruby-600 hover:text-white text-lg px-8 py-2.5 rounded-full font-bold tracking-wide transition-all duration-200 shadow-sm hover:scale-105">
              TRY!
              <span class="icon-external text-xs transition-colors" aria-hidden="true"></span>
            </a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- Bottom Link -->
    <div class="text-center pb-16 md:pb-20">
      <p class="text-stone-700 dark:text-stone-300">
        {{ home.try_ruby.bottom_text }}
        <a href="{{ home.try_ruby.bottom_link_url }}"
           target="_blank"
           rel="noopener noreferrer"
           class="text-semantic-text-link text-lg font-bold hover:underline inline-flex items-center gap-1">
          <span class="icon-arrow-forward" aria-hidden="true"></span>Try Ruby
          <span class="icon-external text-xs" aria-hidden="true"></span>
        </a>
      </p>
    </div>
  </div>
</section>
