{% if site.data.locales[page.lang].toc %}
  {% assign toc = site.data.locales[page.lang].toc %}
{% else %}
  {% assign toc = site.data.locales['en'].toc %}
{% endif %}

<!-- Mobile/Tablet TOC (collapsible) -->
<div class="bg-stone-50 dark:bg-stone-800 rounded-lg border border-stone-200 dark:border-stone-700 overflow-hidden lg:bg-transparent lg:dark:bg-transparent lg:border-0 lg:rounded-none lg:overflow-visible">
  <!-- TOC toggle header (mobile only) -->
  <button id="toc-toggle" class="lg:hidden flex items-center justify-between w-full px-4 py-3 hover:bg-stone-100 dark:hover:bg-stone-700 transition-colors">
    <span class="flex items-center gap-2 font-bold text-stone-900 dark:text-stone-100">
      <span class="icon-lists" aria-hidden="true"></span>
      {{ toc.heading }}
    </span>
    <span id="toc-chevron" class="icon-dropdown text-stone-500 dark:text-stone-400 transition-transform" aria-hidden="true"></span>
  </button>

  <!-- Desktop heading (desktop only) -->
  <h3 class="hidden lg:flex font-bold text-stone-900 dark:text-stone-100 items-center gap-2 mb-4">
    <span class="icon-lists" aria-hidden="true"></span>
    {{ toc.heading }}
  </h3>

  <!-- TOC content panel -->
  <div id="toc-mobile-panel" class="hidden lg:block border-t border-stone-200 dark:border-stone-700 lg:border-0">
    <div class="px-4 pt-4 pb-6 lg:px-0 lg:pt-0 lg:pb-0">
      <div class="toc-content not-prose">
        <!-- TOC will be dynamically generated here -->
      </div>
    </div>
  </div>
</div>
